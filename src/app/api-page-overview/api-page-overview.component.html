<app-container>
  <div class="md:grid-cols-3 md:grid py-6 md:gap-4 font-light">
    <div
      class="
        col-span-2
        bg-white
        p-8
        rounded-md
        border border-gray-200 border-solid
      "
    >
      <h2 class="font-black text-black text-xl mb-4 dark:text-white">
        Introduction
      </h2>
      <p class="mb-0"><markdown [data]="getDescription()"></markdown></p>
      <h2 class="font-black text-black mb-4 dark:text-white mt-6 text-xl">
        Features
      </h2>
      <p>
        See the features of the {{ singleApiService.service.api.name }} service
        below along with related pricing details
      </p>
      <div class="overflow-hidden sm:rounded-lg mb-6">
        <table class="min-w-full divide-y divide-gray-200">
          <thead class="border-b border-solid border-gray-100">
            <tr>
              <th
                class="
                  text-left text-xs
                  font-medium
                  tracking-wider
                  py-3
                  text-gray-400
                "
              >
                Endpoint
              </th>
              <th
                class="
                  text-left text-xs
                  font-medium
                  tracking-wider
                  py-3
                  text-gray-400
                  px-3
                "
              >
                Description
              </th>
              <th
                class="
                  text-left text-xs
                  font-medium
                  tracking-wider
                  py-3
                  text-gray-400
                "
              >
                Pricing (per request)
              </th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let endpoint of endpoints | keyvalue"
              class="border-b border-solid border-gray-100"
            >
              <td class="py-3 text-sm w-2/12 font-medium">
                <a
                  href="/{{ singleApiService.service.api.name }}/api#{{
                    formatTitle(endpoint.key)
                  }}"
                  class="text-indigo-600"
                >
                  {{ formatTitle(endpoint.key) }}
                </a>
              </td>
              <td class="py-3 text-sm w-7/12 px-3">
                {{ endpoint.value.request.description }}
              </td>
              <td class="py-3 text-sm w-3/12">
                <span class="font-normal rounded-md">
                  {{ getEndpointPrice(endpoint) }}
                </span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <h2 class="font-black text-black text-xl mb-6 dark:text-white">
        Examples
      </h2>

      <span *ngIf="example == undefined"> No examples available </span>

      <div *ngIf="example != undefined">
        <p class="font-bold mb-4">{{ formatTitle(example.title) }}</p>
        <div class="mb-4">
          <pre
            class="rounded-md font-mono text-sm"
          ><code class="example" language="'curl'" [highlight]="formatJSON(example.request)"></code></pre>
        </div>
        <pre
          class="rounded-md font-mono text-sm"
        ><code class="example" language="'curl'" [highlight]="formatJSON(example.response)"></code></pre>
      </div>
      <p class="mt-4">
        Visit the
        <a
          routerLink="/{{ this.singleApiService.service.api.name }}/api"
          class="text-indigo-600 hover:underline"
          >API page</a
        >
        to get started.
      </p>
    </div>
    <aside>
      <div
        class="
          bg-white
          p-8
          rounded-md
          border border-gray-200 border-solid
          flex-grow-0
          mb-4
          mt-4
          md:mt-0
        "
      >
        <h3 class="font-black text-black text-lg mb-6 dark:text-white">
          Source
        </h3>
        <p><a href="https://github.com/micro/services">Github.com</a> (micro/services)</p>
      </div>
      <div
        class="
          bg-white
          p-8
          rounded-md
          border border-gray-200 border-solid
          flex-grow-0
          mb-4
          mt-4
          md:mt-0
        "
      >
        <h3 class="font-black text-black text-lg mb-6 dark:text-white">
          License
        </h3>
        <p><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache 2.0</a></p>
      </div>
      <div
        class="
          bg-white
          p-8
          rounded-md
          border border-gray-200 border-solid
          flex-grow-0
        "
      >
        <h3 class="font-black text-black text-lg mb-6 dark:text-white">
          Support
        </h3>
        <p class="mb-0">
          Join the community on 
          <a
            href="https://slack.m3o.com"
            class="font-medium underline hover:no-underline text-indigo-600"
            target="_blank"
            >Slack</a
          >
          or 
          <a
            href="https://discord.gg/TBR9bRjd6Z"
            class="font-medium underline hover:no-underline text-indigo-600"
            target="_blank"
            >Discord</a
          >
          and we'll answer your questions ASAP. Alternatively email us at 
          <a class="font-medium underline hover:no-underline text-indigo-600" href="mailto:support@m3o.com">support@m3o.com</a> for support.
        </p>
      </div>
    </aside>
  </div>
</app-container>
