<app-header></app-header>

<!-- <mat-toolbar
  style="background-color: white"
  class="p-4 border-b border-gray-300"
>
  <mat-toolbar-row
    style="padding-bottom: 0; padding-left: 0; padding-right: 0em"
  >
    <button mat-icon-button (click)="sidenav.toggle()" fxHide.gt-sm>
      <mat-icon>menu</mat-icon>
    </button>
    <a routerLink="/" class="relative">
      <svg viewBox="0 0 375 375" version="1.2" class="w-20">
        <defs>
          <g>
            <symbol overflow="visible" id="glyph0-1">
              <path
                d="M 57.859375 0 L 57.859375 -21.578125 C 57.859375 -24.242188 57.957031 -26.984375 58.15625 -29.796875 C 58.363281 -32.609375 58.582031 -34.972656 58.8125 -36.890625 C 59.039062 -38.804688 59.1875 -40.023438 59.25 -40.546875 L 58.90625 -40.546875 L 47.84375 0 L 32.796875 0 L 21.65625 -40.453125 L 21.3125 -40.453125 C 21.375 -39.929688 21.535156 -38.726562 21.796875 -36.84375 C 22.054688 -34.957031 22.300781 -32.609375 22.53125 -29.796875 C 22.757812 -26.984375 22.875 -24.242188 22.875 -21.578125 L 22.875 0 L 5.21875 0 L 5.21875 -59.859375 L 32.359375 -59.859375 L 41.40625 -25.3125 L 41.765625 -25.3125 L 50.71875 -59.859375 L 76.90625 -59.859375 L 76.90625 0 Z M 57.859375 0 "
              />
            </symbol>
            <symbol overflow="visible" id="glyph0-2">
              <path
                d="M 38.546875 0 L 37.40625 -6.953125 C 35.613281 -4.460938 33.25 -2.503906 30.3125 -1.078125 C 27.382812 0.335938 24.296875 1.046875 21.046875 1.046875 C 15.710938 1.046875 11.710938 -0.429688 9.046875 -3.390625 C 6.378906 -6.347656 5.046875 -10.613281 5.046875 -16.1875 L 5.046875 -45.9375 L 22.359375 -45.9375 L 22.359375 -18.265625 C 22.359375 -16.296875 22.863281 -14.71875 23.875 -13.53125 C 24.894531 -12.34375 26.332031 -11.75 28.1875 -11.75 C 30.332031 -11.75 32.070312 -12.441406 33.40625 -13.828125 C 34.738281 -15.222656 35.40625 -16.9375 35.40625 -18.96875 L 35.40625 -45.9375 L 52.71875 -45.9375 L 52.71875 0 Z M 38.546875 0 "
              />
            </symbol>
          </g>
        </defs>
        <g id="surface1">
          <path
            d="M 187.410156 300.90625 C 157.105469 300.90625 128.574219 289.113281 107.164062 267.65625 C 85.707031 246.246094 73.910156 217.710938 73.910156 187.410156 C 73.910156 157.105469 85.707031 128.574219 107.164062 107.164062 C 128.574219 85.707031 157.105469 73.910156 187.410156 73.910156 C 217.710938 73.910156 246.246094 85.707031 267.65625 107.164062 C 289.113281 128.621094 300.90625 157.105469 300.90625 187.410156 C 300.90625 217.710938 289.113281 246.246094 267.65625 267.65625 C 246.246094 289.113281 217.710938 300.90625 187.410156 300.90625 Z M 187.410156 80.714844 C 158.921875 80.714844 132.113281 91.828125 111.972656 111.972656 C 91.832031 132.113281 80.714844 158.921875 80.714844 187.410156 C 80.714844 215.898438 91.832031 242.707031 111.972656 262.847656 C 132.113281 282.988281 158.921875 294.101562 187.410156 294.101562 C 215.898438 294.101562 242.707031 282.988281 262.847656 262.847656 C 282.988281 242.707031 294.101562 215.898438 294.101562 187.410156 C 294.101562 158.921875 282.988281 132.113281 262.847656 111.972656 C 242.707031 91.828125 215.898438 80.714844 187.410156 80.714844 Z M 187.410156 80.714844 "
          />
          <g>
            <use xlink:href="#glyph0-1" x="117.412423" y="215.309547" />
          </g>
          <g>
            <use xlink:href="#glyph0-2" x="199.54037" y="215.309547" />
          </g>
        </g>
      </svg>
      <sup
        class="
          absolute
          left-12
          top-4
          bg-green-300
          text-xs
          rounded-full
          p-1
          text-gray-900
        "
        >Beta</sup
      >
    </a>
    <div
      fxShow="true"
      fxHide.lt-md
      style="font-size: 0.7em; padding-top: 10px"
      *ngIf="this.currentURL() != '/explore'"
    >
      <mat-form-field
        style="width: 100%; padding-left: 2em"
        appearance="outline"
      >
        <input
          appearance="standard"
          autocomplete="off"
          matInput
          style="color: #444"
          placeholder="Search for APIs"
          [(ngModel)]="search"
        /><button
          (click)="submit()"
          mat-button
          matSuffix
          mat-stroked-button
          style="position: relative; top: -8px"
        >
          Search
        </button>
      </mat-form-field>
    </div>

    <span class="menu-spacer"></span>

    <div style="padding-top: 4px" fxShow="true" fxHide.lt-md>
      <mat-menu id="new" #new="matMenu" style="float: right">
        <button *ngIf="user && user.name" mat-menu-item disabled>
          <mat-icon>access_time</mat-icon>
          <span>New Namespace</span>
        </button>
      </mat-menu>

      <a
        routerLink="/explore"
        class="text-gray-600 text-sm hover:text-green-400 transition-colors"
        >Explore</a
      >

      <ng-container *ngIf="!us.loggedIn() || !user || !user.name">
        <a
          routerLink="/login"
          data-cy="login"
          class="
            text-gray-600 text-sm
            inline-block
            mx-4
            hover:text-green-400
            transition-colors
          "
          >Login</a
        >
      </ng-container>

      <mat-menu id="matmenu" #menu="matMenu">
        <button
          mat-menu-item
          (click)="goToTeam()"
          *ngIf="user && user.teamName && user.teamUrl"
        >
          <img
            *ngIf="user.organizationAvatarUrl"
            style="
              vertical-align: middle;
              margin-right: 0.25em;
              border-radius: 3px;
              height: 2em;
              width: 2em;
            "
            src="{{ user.organizationAvatarUrl }}"
          />
          <span style="font-weight: 700">{{ user.teamName }}</span>
        </button>

        <button
          class="usage"
          id="usage"
          mat-menu-item
          routerLink="/overview/usage"
        >
          Usage
        </button>
        <button
          class="payments"
          id="payments"
          mat-menu-item
          routerLink="/overview/billing"
        >
          Billing
        </button>
        <button
          class="keys"
          id="keys"
          mat-menu-item
          routerLink="/settings/keys"
        >
          API Keys
        </button>
        <button
          class="logout"
          id="logout"
          *ngIf="user && user.name"
          mat-menu-item
          (click)="us.logout()"
        >
          Log out
        </button>
      </mat-menu>
      <span fxHide="false" fxHide.lt-md>
        <button
          *ngIf="user && user.name"
          mat-stroked-button
          [matMenuTriggerFor]="menu"
          class="dropdown-menu"
          id="dropdown-menu"
        >
          <img
            *ngIf="user.avatarUrl"
            style="
              vertical-align: middle;
              margin-right: 0.25em;
              border-radius: 3px;
              height: 2em;
              width: 2em;
            "
            src="{{ user.avatarUrl }}"
          />
          {{ user.name }}
          <mat-icon>keyboard_arrow_down</mat-icon>
        </button>

        <ng-container *ngIf="!us.loggedIn() || !user || !user.name">
          <a
            routerLink="/register"
            class="
              py-4
              px-6
              bg-green-300
              text-sm
              rounded-full
              text-gray-800
              hover:bg-green-400
              transition-colors
            "
            data-cy="sign-up"
            >Sign Up</a
          >
        </ng-container>
      </span>

      <span fxHide="false" fxHide.gt-sm>
        <button
          style="padding-right: 0; margin-right: 0"
          mat-button
          [matMenuTriggerFor]="menu"
        >
          <mat-icon style="color: white">dehaze</mat-icon>
        </button>
      </span>
    </div>
  </mat-toolbar-row>
</mat-toolbar> -->

<mat-sidenav-container>
  <mat-sidenav style="width: 66%" #sidenav autoFocus="false">
    <mat-nav-list>
      <div
        *ngIf="user && user.teamName"
        style="margin-bottom: 1em; padding-left: 1em"
      >
        <img
          *ngIf="user.avatarUrl"
          style="
            vertical-align: middle;
            margin-right: 0.5em;
            border-radius: 3px;
            height: 2em;
            width: 2em;
          "
          src="{{ user.avatarUrl }}"
        />
        {{ user.name }}
      </div>
      <div>
        <mat-form-field style="padding-left: 1em">
          <input
            matInput
            autocomplete="off"
            style="color: #444; font-size: 0.8em; line-height: 0"
            placeholder="Search for APIs"
            [(ngModel)]="search"
          />
        </mat-form-field>
      </div>

      <div>
        <a routerLink="/explore" (click)="sidenav.toggle()" mat-list-item>
          Explore
        </a>
      </div>
      <div *ngIf="!(user && user.name)">
        <a routerLink="/login" (click)="sidenav.toggle()" mat-list-item
          >Login</a
        >
      </div>
      <div *ngIf="!(user && user.name)">
        <a routerLink="/register" (click)="sidenav.toggle()" mat-list-item
          >Register</a
        >
      </div>
      <div *ngIf="user && user.name">
        <a routerLink="/overview/usage" (click)="sidenav.toggle()" mat-list-item
          >Usage</a
        >
        <a
          routerLink="/overview/billing"
          (click)="sidenav.toggle()"
          mat-list-item
          >Billing</a
        >
        <a routerLink="/settings/keys" (click)="sidenav.toggle()" mat-list-item
          >Settings</a
        >
      </div>
      <div *ngIf="user && user.name">
        <a (click)="us.logout()" mat-list-item>Log out</a>
      </div>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content style="background: white" fxFlexFill>
    <div style="min-height: calc(100vh - 104px); background: white">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>

<app-footer></app-footer>
